C51 COMPILER V9.60.0.0   UART                                                              10/30/2020 21:40:31 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN uart.OBJ
COMPILER INVOKED BY: E:\software\keil\C51\BIN\C51.EXE uart.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "uart.h"
   2          #include <stdio.h>
   3          #include <reg52.h>
   4          
   5          //unsigned char RX_Buffer[30];
   6          unsigned char Num = 0;
   7          bit Flag_Receive_OK = 0;
   8          
   9          
  10          void Uart_Init()                     
  11          {
  12   1        SCON = 0X50;  //UART方式1；8位UART
  13   1        REN  = 0;     //不允许串行口接收数据
  14   1        PCON = 0x00;  //SMOD=0;波特率不加倍
  15   1        TMOD = 0x21;  //T1方式2，用于产生波特率
  16   1        TH1  = 0xFD;  //装初值
  17   1        TL1  = 0xFD;
  18   1        TR1  = 1;     //启动定时器1
  19   1        EA   = 1;     //打开全局中断控制
  20   1        ES   = 0;     //串行口中断  
  21   1      }
  22          
  23          void Send_Word(unsigned char *p)        //发送字符串
  24          { 
  25   1        while(*p)
  26   1        {
  27   2          SBUF=*(p++);
  28   2          while(TI==0)
  29   2          {
  30   3            ;
  31   3            ;
  32   3            ;
  33   3          };
  34   2          TI=0;
  35   2        }   
  36   1      }
  37          
  38          void Send_ASCII(unsigned char c)        //发送一个字符
  39          { 
  40   1          TI=0;   
  41   1          SBUF=c;   
  42   1          while(TI==0);   
  43   1          TI=0;   
  44   1      }
  45          
  46          
  47          //void Send_LongData(unsigned long d)
  48          //{
  49          //  unsigned char buf[8] = {0};
  50          //  buf[0] = d >> 56;
  51          //  buf[1] = d >> 48;
  52          //  buf[2] = d >> 40;
  53          //  buf[3] = d >> 32;
  54          //  buf[4] = d >> 24;
  55          //  buf[5] = d >> 16;
C51 COMPILER V9.60.0.0   UART                                                              10/30/2020 21:40:31 PAGE 2   

  56          //  buf[6] = d >> 8;
  57          //  buf[7] = d;
  58          
  59          //}
  60          
  61          
  62          
  63          
  64          
  65          
  66          
  67          
  68          
  69          
  70          
  71          
  72          
  73          
  74          
  75          
  76          
  77          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     74    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
